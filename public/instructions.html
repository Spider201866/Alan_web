<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Instructions</title>
    <!-- Translations object embedded for a single-file solution -->
    <script>
      window.translations = {
        en: {
          instructionsPageTitle: 'Instructions',
          instructionsIntro: `Alan is an AI assistant for students and those who only occasionally see eye, ear or skin cases. Write or speak clearly and avoid identifying names or details. Look fully around head/face/body part and examine both eyes/ears. Good luck!`,
          instructionsPatientPrompt: `Tell Alan about your patient's:`,
          instructionsPatientDetail1: 'problem & onset',
          instructionsPatientDetail2: 'what you see',
          instructionsPatientDetail3: 'vision & pupils',
          instructionsPatientDetail4: 'age, sex, medication',
          instructionsBackground_eye: '#dfe7ff',
          instructionsBackground_ear: '#ffefd5',
          instructionsBackground_skin: '#e0ffff',
          instructionsUseArclight_eye: `<strong>Use Arclight:</strong> <strong><em>front, fundal reflex, back of eye.</em></strong>`,
          instructionsUseArclight_ear: `<strong>Use Arclight:</strong> <strong><em>canal, eardrum.</em></strong>`,
          instructionsUseArclight_skin: `<strong>Use Arclight:</strong> <strong><em>UV light, dermoscopy.</em></strong>`,
          instructionsLabelTooLittle: 'Too little',
          instructionsLabelJustRight: 'Just right',
          instructionsLabelTooMuch: 'Too much',
          instructionsTooLittle_eye: 'man red eye what?',
          instructionsJustRight_eye: `Man 25yr, red eye 3 day. No meds or eye prob before. Pain, watering, White cornea dot. Pupils OK, Vision 6/12 6/6 other`,
          instructionsTooMuch_eye: `This man came into clinics today. He drove into the building with a red eye, now he thinks the food he ate is affecting his eye. I see watering, red edges, you know? He wants help. Tall man, watery eyes, worried about cornea and pain. He says, "What is this?"`,
          instructionsAdditionalQuery_eye: `Alan also answers eye teaching/learning queries: What is Iritis? How do I see the retina?`,
          instructionsTooLittle_ear: 'child ear pain',
          instructionsJustRight_ear: 'Girl 4yr, R ear pain 2 days. Fever, pulling ear. TM red, bulging. Not crying now. No discharge.',
          instructionsTooMuch_ear: `My daughter has an earache, she was fine yesterday but today she keeps touching her right ear and she had a temperature earlier. I looked inside but I can't see anything. What do you think is wrong with her?`,
          instructionsAdditionalQuery_ear: 'Alan also answers ear teaching/learning queries: What is otitis media?',
          instructionsTooLittle_skin: 'rash on arm',
          instructionsJustRight_skin: `Woman 30yr, itchy rash on arm 1 week. Spreading slowly. Annular lesion with central clearing. No fever, feels well.`,
          instructionsTooMuch_skin: `I have this weird circular rash on my forearm, it started small but it's getting bigger. It doesn't hurt but it's really itchy. I haven't used any new soaps or anything. It's been there for about a week.`,
          instructionsAdditionalQuery_skin: `Alan also answers skin teaching/learning queries: What is tinea? How to use a Woods light?`,
        },
      };
    </script>
    <style>
      /* --- Identical to original styles, with flexbox fix --- */
      body, html {
        margin: 0; padding: 0; height: 100%; /* Ensure full height */
        font-family: 'Calibri Light', Arial, sans-serif;
        font-size: 15px; background-color: white;
      }
      /* FIX: Make body a flex container to manage height */
      body {
        display: flex;
        flex-direction: column;
      }
      #appBar {
        display: flex; align-items: center;
        background-color: black; color: white;
        padding: 10px 20px;
        flex-shrink: 0; /* Prevent header from shrinking */
      }
      #pageTitle {
        text-align: center; margin: 0 auto; font-size: 24px;
      }
      #backArrow {
        background: none; border: none; font-family: inherit;
        color: white; font-size: 32px; font-weight: bold;
        cursor: pointer; padding-right: 20px;
      }
      #content {
        padding: 5px 25px 25px 25px; background-color: #dfe7ff;
        flex-grow: 1; /* FIX: This makes the content area fill remaining vertical space */
      }
      #introText {
        margin-bottom: 20px; font-size: 15px; text-align: justify;
      }
      #wrapSection {
        overflow: hidden; margin-bottom: 25px; padding-right: 0;
      }
      #switchContainer {
        float: right; width: 100px; text-align: center;
        padding: 10px; border-radius: 15px;
        margin-left: 0; margin-right: -25px; margin-top: -10px;
      }
      .switch {
        position: relative; display: inline-block;
        width: 60px; height: 180px;
      }
      .switch input { display: none; }
      .switch-label {
        display: flex; align-items: center; justify-content: center;
        cursor: pointer; width: 60px; height: 60px;
        font-weight: bold; color: black; background-color: white;
        transition: background-color 0.3s, box-shadow 0.3s;
        border-radius: 20px; border: 1px solid black;
        margin-bottom: 10px; white-space: nowrap;
        overflow: hidden; text-overflow: ellipsis;
      }
      .switch-label:hover {
        background-color: #e0e0e0; box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      }
      .switch input:checked + .switch-label {
        background-color: black; color: white;
        border-color: black; box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
      }
      .clear { clear: both; }
      .boldText { font-weight: bold; }
      .justify { text-align: justify; }
      #additionalExamples p { margin-bottom: 10px; font-size: 13px; color: #333; }
      #additionalExamples strong {
        display: block; font-weight: bold;
        margin-bottom: -10px; line-height: 1.2;
      }
      #additionalExamples span {
        display: block; margin-left: 10px;
        margin-top: 0; line-height: 1.2;
      }
      .infoText { padding-left: 60px; color: black; }
      .infoText li { list-style-type: none; line-height: 1.2; margin-bottom: 2px; }
      .listText { color: red; }
      hr { border: none; height: 2px; background-color: #ccc; margin: 20px 0; }
      #useArclight { margin-top: 20px; }
      #additionalQuery { padding-top: 5px; color: blue; font-size: 15px; }
      @media (max-width: 600px) {
        #switchContainer {
          width: 80px; margin-left: 0; margin-right: 0; margin-top: -10px;
        }
      }
    </style>
  </head>
  <body>
    <!-- TOP APP BAR with accessible button -->
    <header id="appBar">
      <button id="backArrow" aria-label="Go Back">‚Üê</button>
      <h1 id="pageTitle">Instructions</h1>
    </header>
    <!-- MAIN CONTENT AREA -->
    <main id="content">
      <p id="introText"></p>
      <div id="wrapSection">
        <div id="switchContainer">
          <div class="switch">
            <input type="radio" name="option" id="optionEye" value="eye" checked />
            <label for="optionEye" class="switch-label" title="Eye">Eye</label>
            <input type="radio" name="option" id="optionEar" value="ear" />
            <label for="optionEar" class="switch-label" title="Ear">Ear</label>
            <input type="radio" name="option" id="optionSkin" value="skin" />
            <label for="optionSkin" class="switch-label" title="Skin">Skin</label>
          </div>
        </div>
        <div id="wrapText">
          <p id="patientPrompt" class="boldText"></p>
          <ul class="infoText">
            <li id="patientDetail1"></li>
            <li id="patientDetail2"></li>
            <li id="patientDetail3"></li>
            <li id="patientDetail4"></li>
          </ul>
          <p id="useArclight"></p>
          <hr />
          <div id="additionalExamples" class="justify">
            <p><strong id="labelTooLittle"></strong><br /><span id="tooLittle"></span></p>
            <p><strong id="labelJustRight"></strong><br /><span id="justRight"></span></p>
            <p><strong id="labelTooMuch"></strong><br /><span id="tooMuch"></span></p>
            <p id="additionalQuery"></p>
          </div>
        </div>
        <div class="clear"></div>
      </div>
    </main>

    <!-- SCRIPT with unobtrusive event listeners -->
    <script>
      var trans;

      document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('backArrow').addEventListener('click', function() { history.back(); });
        document.querySelectorAll('input[name="option"]').forEach(function(radio) {
          radio.addEventListener('change', toggleContent);
        });
        updatePageTranslations();
      });

      window.addEventListener('storage', function (e) {
        if (e.key === 'preferredLanguage') {
          updatePageTranslations();
        }
      });

      function updatePageTranslations() {
        var lang = localStorage.getItem('preferredLanguage') || 'en';
        trans = window.translations && window.translations[lang];
        if (trans) {
          document.getElementById('pageTitle').textContent = trans.instructionsPageTitle;
          document.getElementById('introText').innerHTML = trans.instructionsIntro;
          document.getElementById('patientPrompt').textContent = trans.instructionsPatientPrompt;
          document.getElementById('patientDetail1').innerHTML = `<span class="listText">${trans.instructionsPatientDetail1}</span>`;
          document.getElementById('patientDetail2').innerHTML = `<span class="listText">${trans.instructionsPatientDetail2}</span>`;
          document.getElementById('patientDetail3').innerHTML = `<span class="listText">${trans.instructionsPatientDetail3}</span>`;
          document.getElementById('patientDetail4').innerHTML = `<span class="listText">${trans.instructionsPatientDetail4}</span>`;
          toggleContent();
        }
      }
      
      function toggleContent() {
        var option = document.querySelector('input[name="option"]:checked').value;
        if (!trans) return;

        document.getElementById('labelTooLittle').textContent = trans.instructionsLabelTooLittle;
        document.getElementById('labelJustRight').textContent = trans.instructionsLabelJustRight;
        document.getElementById('labelTooMuch').textContent = trans.instructionsLabelTooMuch;

        if (option === 'eye') {
          document.getElementById('content').style.backgroundColor = trans.instructionsBackground_eye;
          document.getElementById('useArclight').innerHTML = trans.instructionsUseArclight_eye;
          document.getElementById('tooLittle').textContent = trans.instructionsTooLittle_eye;
          document.getElementById('justRight').textContent = trans.instructionsJustRight_eye;
          document.getElementById('tooMuch').textContent = trans.instructionsTooMuch_eye;
          document.getElementById('additionalQuery').innerHTML = trans.instructionsAdditionalQuery_eye;
        } else if (option === 'ear') {
          document.getElementById('content').style.backgroundColor = trans.instructionsBackground_ear;
          document.getElementById('useArclight').innerHTML = trans.instructionsUseArclight_ear;
          document.getElementById('tooLittle').textContent = trans.instructionsTooLittle_ear;
          document.getElementById('justRight').textContent = trans.instructionsJustRight_ear;
          document.getElementById('tooMuch').textContent = trans.instructionsTooMuch_ear;
          document.getElementById('additionalQuery').innerHTML = trans.instructionsAdditionalQuery_ear;
        } else if (option === 'skin') {
          document.getElementById('content').style.backgroundColor = trans.instructionsBackground_skin;
          document.getElementById('useArclight').innerHTML = trans.instructionsUseArclight_skin;
          document.getElementById('tooLittle').textContent = trans.instructionsTooLittle_skin;
          document.getElementById('justRight').textContent = trans.instructionsJustRight_skin;
          document.getElementById('tooMuch').textContent = trans.instructionsTooMuch_skin;
          document.getElementById('additionalQuery').innerHTML = trans.instructionsAdditionalQuery_skin;
        }
      }
    </script>
  </body>
</html>