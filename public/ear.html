<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ear Exam</title>
    <!-- Translations object embedded for a single-file solution -->
    <script>
      window.translations = {
        en: {
          pageTitle: 'How to examine the ear',
          allAroundEarHeading: 'All around ear',
          allAroundEarText: `Check: <em>pinna, </em><em>tragus, </em><em>mastoid</em> for lumps, tenderness or discharge<br />Gently move pinna, note any pain`,
          earCanalHeading: 'Ear canal',
          earCanalText: `Tilt head, <strong><u>hold Arclight like a pen</u></strong><br />Pull pinna up/back (adults) or down/back (children)<br />Insert speculum (4.5mm adult, 2.5mm infant), push past hairs, rotate if needed<br />Look for: <em>wax,</em> <em>debris,</em> <em>infection</em>`,
          tympanicMembraneHeading: 'Tympanic membrane',
          tympanicMembraneText: `Identify handle of malleus, light reflex, attic<br />Note: <em>color</em>, <em>position</em>, <em>translucency</em><br />Look for perforation, fluid or scarring`,
          additionalText: `Know your TM's: normal, <span class="red">red</span>, <span class="orange">bulging</span>, <span class="green">retracted</span>, <span class="purple">perforated</span><br />>Practice often<`,
        },
      };
    </script>
    <style>
      /* --- Identical to original styles, with minimal additions --- */
      body {
        font-family: 'Calibri Light', Arial, sans-serif;
        background-color: white;
        color: black;
        margin: 0;
        padding: 0;
      }
      #appBar {
        display: flex;
        align-items: center;
        background-color: black;
        color: white;
        padding: 10px 20px;
      }
      /* IMPROVEMENT: Target a <button> but make it look like the old <div> */
      #backArrow {
        background: none; border: none; font-family: inherit; /* Reset button styles */
        color: white;
        font-size: 32px;
        font-weight: bold;
        cursor: pointer;
        padding-right: 20px;
      }
      #pageTitle {
        text-align: center;
        margin: 0 auto;
        font-size: 24px;
      }
      #earExamText {
        padding: 15px;
        line-height: 1.4em;
      }
      #earExamText h3 {
        margin-top: 16px;
        margin-bottom: 8px;
      }
      #earExamText p {
        margin-bottom: 8px;
      }
      /* IMPROVEMENT: Reusable classes to replace inline styles */
      .red { color: red; font-weight: bold; }
      .orange { color: orange; }
      .green { color: green; }
      .purple { color: purple; }
    </style>
  </head>
  <body>
    <!-- Top App Bar with accessible button -->
    <div id="appBar">
      <button id="backArrow" aria-label="Go Back">‚Üê</button>
      <h1 id="pageTitle">How to examine the ear</h1>
    </div>

    <!-- Main Content Area -->
    <div id="earExamText">
      <h3 id="allAroundEarHeading">All around ear</h3>
      <p id="allAroundEarText">
        Check: <em>pinna, </em><em>tragus, </em><em>mastoid</em> for lumps, tenderness or discharge<br />
        Gently move pinna, note any pain
      </p>

      <h3 id="earCanalHeading">Ear canal</h3>
      <p id="earCanalText">
        Tilt head, <strong><u>hold Arclight like a pen</u></strong><br />
        Pull pinna up/back (adults) or down/back (children)<br />
        Insert speculum (4.5mm adult, 2.5mm infant), push past hairs, rotate if needed<br />
        Look for: <em>wax,</em> <em>debris,</em> <em>infection</em>
      </p>

      <h3 id="tympanicMembraneHeading">Tympanic membrane</h3>
      <p id="tympanicMembraneText">
        Identify handle of malleus, light reflex, attic<br />
        Note: <em>color</em>, <em>position</em>, <em>translucency</em><br />
        Look for perforation, fluid or scarring
      </p>

      <p id="additionalText">
        Know your TM's: normal, <span class="red">red</span>, <span class="orange">bulging</span>,
        <span class="green">retracted</span>, <span class="purple">perforated</span><br />
        >Practice often<
      </p>
    </div>

    <!-- Script with unobtrusive event listener -->
    <script>
      function updatePageTranslations() {
        var lang = localStorage.getItem('preferredLanguage') || 'en';
        var t = window.translations && window.translations[lang];
        if (t) {
          document.getElementById('pageTitle').textContent = t.pageTitle;
          document.getElementById('allAroundEarHeading').textContent = t.allAroundEarHeading;
          document.getElementById('allAroundEarText').innerHTML = t.allAroundEarText;
          document.getElementById('earCanalHeading').textContent = t.earCanalHeading;
          document.getElementById('earCanalText').innerHTML = t.earCanalText;
          document.getElementById('tympanicMembraneHeading').textContent = t.tympanicMembraneHeading;
          document.getElementById('tympanicMembraneText').innerHTML = t.tympanicMembraneText;
          document.getElementById('additionalText').innerHTML = t.additionalText;
        }
      }

      document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('backArrow').addEventListener('click', function() { history.back(); });
        updatePageTranslations();
      });

      window.addEventListener('storage', function (e) {
        if (e.key === 'preferredLanguage') {
          updatePageTranslations();
        }
      });
    </script>
  </body>
</html>