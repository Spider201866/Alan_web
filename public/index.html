<!-- WJW 02/04/2024 -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Alan</title>

    <script type="module">
      import { faviconAndMetaSetup } from './faviconAndMeta.js';
      faviconAndMetaSetup();
    </script>

    <link rel="stylesheet" href="styles.css">



    <script type="text/javascript">
      window.onload = function () {
        document.getElementById("mainContent").classList.add("hidden");
        checkPassword();
        setTimeout(closeContent, 6000); // Automatically close the content after 6 seconds
    
        // Scroll to the top of the page to ensure the title "Alan" is visible
        window.scrollTo(0, 0);
      };
    
      function checkPassword() {
        var encodedPassword = "NjYyMDIz";
        var passwordEntered = prompt("Enter password:", "");
        var encodedInput = btoa(passwordEntered);
        if (encodedInput === encodedPassword) {
          document.getElementById("mainContent").classList.remove("hidden");
        } else {
          document.body.innerHTML = "Access denied.";
        }
      }
      
      function closeContent() {
        document.getElementById("mainContent").classList.add("hidden");
        setTimeout(function() {
          var chatbotTitle = document.querySelector('.chatbot-title');
          if (chatbotTitle) {
            chatbotTitle.classList.add('flip-horizontally');
            // Call highlightPhases here, ensuring it doesn't interfere with the title or other initial content
            setTimeout(highlightPhases, 2000); // Call shortly after flipping the title for visual continuity
          }
        }, 500); // Wait for 0.5 seconds after hiding the main content
      }
    
      function highlightPhases() {
        const goodHistory = document.getElementById('good-history');
        const examineWell = document.getElementById('examine-well');
        const useArclight = document.getElementById('use-arclight');
        
        // Start highlighting sequence after checks and initial animations
        goodHistory.style.color = 'red';
        setTimeout(() => {
          goodHistory.style.color = 'grey';
          examineWell.style.color = 'red';
          setTimeout(() => {
            examineWell.style.color = 'grey';
            useArclight.style.color = 'red';
            setTimeout(() => {
              useArclight.style.color = 'grey';
            }, 1000);
          }, 1000);
        }, 1000);
      }
    </script>
    
    
  </head>

  <body>
    <style>
      #mainContent {
        text-align: center;
        /* Additional styles for vertical centering if needed */
      }
    </style>
    <div id="mainContent" class="hidden">
      <strong>*Experimental*</strong> AI assistant. Write clearly, avoid identifying details, keep audio &lt;30s. Good luck!
    </div>
    
      <div class="chatbot-header" style="background-color: black; color: white;">
          <div class="chatbot-title">
              <span class="red">Al</span><span class="white">an</span>
          </div>
          <div class="chatbot-subtitle grey-text" style="font-style: italic; font-size: 14px; padding-bottom: 18px; color: #FFFFFF8A;">
            Eyes & Ears
          </div>
                  
      
      </div>
  
      <div class="content-wrapper" style="display: flex; flex-direction: column; justify-content: flex-start; min-height: 20vh; font-weight: bold;">
        <div class="logo-and-text-container" style="text-align: center; line-height: 1.0; padding-top: 20px;">
          <img src="./triangle.png" alt="Logo" id="logo-image" style="max-width: 100px; display: block; margin: 0 auto; margin-bottom: 5px;">
          <p id="additional-text" class="grey-text" style="font-size: 18px; color: grey;">
            <span id="good-history">Good History</span>  |  
            <span id="examine-well">Examine Well</span>  |  
            <span id="use-arclight">Use Arclight</span>
          </p>          
          <p id="sub-text" class="centered-content" style="font-size: 18px; color: black; font-weight: 900;">How can I help you today?</p>
        </div>
      </div>
           
</div>

      

    </div>
    <div class="chatbot-container">
      <flowise-fullchatbot></flowise-fullchatbot>
    </div>

    <div>     
      <!-- Condition name displayed here -->
      <div class="detected-condition"></div>
      
      <!-- Thumbnail image with onclick functionality for zoom -->
      <img id="condition-image" alt="" style="max-width: 100%; height: 140px; display: block; margin: 0 auto; cursor: pointer;" onclick="toggleZoom(this)" /> 
      <p id="condition-description"></p> <!-- Add this line -->
      <div class="chatbot-version">
          *Alan can make mistakes. Use clinical judgement. 4/24
          <br>
      </div>
  </div>
  
  <script>
      function toggleZoom(image) {
          // Check if the image is already zoomed
          if (image.style.height === '200px') {
              // If not zoomed, enlarge to fit the screen
              image.style.height = 'auto'; // Reset height to auto for natural aspect ratio
              image.style.maxWidth = 'none'; // Allow image to exceed the max-width of 100%
              image.style.cursor = 'zoom-out'; // Change cursor for zoom-out
          } else {
              // If zoomed, revert to thumbnail size
              image.style.height = '200px'; // Thumbnail height
              image.style.maxWidth = '100%'; // Ensure image does not exceed container width
              image.style.cursor = 'zoom-in'; // Change cursor for zoom-in
          }
      }
  </script>
    

    <script type="module">  import { initChatbot } from './chatbot-module.js'; initChatbot();</script>

<script type="module" src="listener-module.js"></script>

  </body>
</html>
