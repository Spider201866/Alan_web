<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Splash Screen</title>
    <style>
        body,
        html {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: "Calibri Light", Arial, sans-serif;
            background-color: #f0f0f0;
            box-sizing: border-box;
        }
        .black-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.50s ease-in-out;
        }
        .black-screen.visible {
            visibility: visible;
            opacity: 1;
        }
        .black-screen img {
            width: auto;
            max-width: 30%;
            height: auto;
            filter: blur(20px);
            transition: transform 4s ease-in-out, filter 4s ease-in-out;
        }
        .hidden {
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s 0.5s, opacity 0.5s linear;
        }
        .visible {
            visibility: visible;
            opacity: 1;
            transition: opacity 0.5s linear;
        }
        button:disabled {
            background-color: #ccc;
        }
        .splash-screen img,
        .splash-screen p {
            transition: transform 3s ease-in-out;
            margin: 20px 0;
        }
        .splash-screen img {
            width: 30vw;
            max-width: 150px;
            height: auto;
            margin-bottom: 60px;
            transform-origin: center;
            -webkit-transform-origin: center;
        }
        @keyframes zoomEffect {
            from {
                transform: scale(0.8);
                -webkit-transform: scale(0.8);
            }
            to {
                transform: scale(1);
                -webkit-transform: scale(1);
            }
        }
        .splash-screen.visible img {
            animation: zoomEffect 3s ease-in-out forwards;
        }
        .splash-screen,
        .instruction-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .splash-screen img,
        .splash-screen p {
            transition: transform 3s ease-in-out;
            margin: 20px 0;
        }
        .splash-screen img {
            width: 30vw;
            max-width: 150px;
            height: auto;
            margin-bottom: 60px;
        }
        #logo2 {
            width: 50vw;
            max-width: 300px;
            margin-bottom: 60px;
        }
        .splash-screen p {
            font-size: calc(12px + 1vmin);
            font-weight: bold;
            font-style: italic;
            margin-top: 60px;
        }
        .instruction-screen {
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: white;
            overflow: auto;
            box-sizing: border-box;
        }
        .instruction-screen p {
            font-size: 16px;
            margin: 20px;
            color: #333;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            color: white;
            background-color: #007bff;
            border: none;
            border-radius: 15px;
            cursor: pointer;
        }
        select {
            padding: 4px 20px;
            font-size: 14px;
            color: grey;
            background-color: white;
            border: 1px solid grey;
            cursor: pointer;
            appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"><path d="M7 10l5 5 5-5H7z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 25px;
            border-radius: 15px;
            overflow: auto;
            max-height: 300px;
            width: auto;
            min-width: 230px;
            line-height: 1.2;
        }
        button:disabled {
            background-color: #ccc;
        }
    </style>
</head>
<body>
    <div class="splash-screen visible">
        <img id="logo1" src="./Q.png" alt="Q Logo" />
        <img id="logo2" src="./AP.png" alt="AP Logo" />
        <p>Eye & Ear AI Assistant</p>
    </div>

    <div class="instruction-screen hidden">
        <img src="bigredt.png" alt="Big Red T Logo" style="max-width: 120px; height: auto; margin-bottom: -10px" />
        <p><strong>*Experimental*</strong></p>
        <p>Alan is an AI assistant for students and those who only occasionally see eye or ear cases. Write or speak clearly, avoid identifying names or other details, keep audio messages &lt;30s.</p>
        <p>Good luck!</p>

        <select id="job-role-select" class="job-role-dropdown">
            <option value="" disabled selected hidden>Role</option>
            <option value="Health worker">Health worker</option>
            <option value="Nurse">Nurse</option>
            <option value="Ophthalmic clinical officer">Ophthalmic clinical officer</option>
            <option value="Medical student">Medical student</option>
            <option value="General practitioner">General practitioner</option>
            <option value="Hospital doctor">Hospital doctor</option>
            <option value="Ophthalmologist">Ophthalmologist</option>
            <option value="Optometrist">Optometrist</option>
            <option value="Orthoptist">Orthoptist</option>
            <option value="ENT specialist">ENT specialist</option>
            <option value="Pharmacist">Pharmacist</option>
            <option value="Audiologist">Audiologist</option>
            <option value="Ear care practitioner">Ear care practitioner</option>
        </select>

        <div style="margin-bottom: 20px"></div>

        <select id="country-select" class="country-dropdown">
            <option value="" disabled selected hidden>Country</option>
            <option value="Australia">Australia</option>
            <option value="Bhutan">Bhutan</option>
            <option value="Egypt">Egypt</option>
            <option value="Germany">Germany</option>
            <option value="Ghana">Ghana</option>
            <option value="India">India</option>
            <option value="Indonesia">Indonesia</option>
            <option value="Kenya">Kenya</option>
            <option value="Malawi">Malawi</option>
            <option value="Mongolia">Mongolia</option>
            <option value="Nepal">Nepal</option>
            <option value="Pakistan">Pakistan</option>
            <option value="Rwanda">Rwanda</option>
            <option value="South Africa">South Africa</option>
            <option value="Tanzania">Tanzania</option>
            <option value="Uganda">Uganda</option>
            <option value="UK">UK</option>
            <option value="USA">USA</option>
        </select>

        <br /><br /><br />
        <button onclick="proceedToHome()" id="acceptButton" disabled>Accept</button>
    </div>

    <div class="black-screen" id="blackScreen">
        <img src="./sky.png" alt="Sky">
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const jobSelectElement = document.getElementById("job-role-select");
            const countrySelectElement = document.getElementById("country-select");
            const acceptButton = document.getElementById("acceptButton");
            const blackScreen = document.getElementById("blackScreen");
            const skyImage = blackScreen.querySelector('img');

            // Initial setup for the image transformation
            skyImage.style.transform = 'scale(1)';
            skyImage.style.transition = 'transform 4s ease-in-out, filter 4s ease-in-out';

            jobSelectElement.addEventListener("change", function () {
                checkSelections();
            });

            countrySelectElement.addEventListener("change", function () {
                checkSelections();
            });

            function checkSelections() {
                jobSelectElement.style.color = jobSelectElement.value ? 'blue' : 'grey';
                countrySelectElement.style.color = countrySelectElement.value ? 'blue' : 'grey';
                acceptButton.disabled = !(jobSelectElement.value && countrySelectElement.value);
            }

            acceptButton.addEventListener("click", function () {
                localStorage.setItem("selectedJobRole", jobSelectElement.value);
                localStorage.setItem("selectedCountry", countrySelectElement.value);

                // Make the black screen visible
                blackScreen.style.visibility = 'visible';
                blackScreen.style.opacity = 1;

                // Start the zoom and blur effect shortly after making the image visible
                setTimeout(() => {
                    skyImage.style.transform = 'scale(1.3)';
                    skyImage.style.filter = 'blur(0px)';
                }, 200);

                // Fade out after the set display time
                setTimeout(() => {
                    blackScreen.style.opacity = 0;
                    setTimeout(() => {
                        window.location.href = "home.html";
                    }, 250);
                }, 6000);
            });

            if (!sessionStorage.getItem("splashShown")) {
                sessionStorage.setItem("splashShown", "true");
                showSplashScreen();
            } else {
                window.location.href = "home.html";
            }
        });

        function showSplashScreen() {
            const logo1 = document.getElementById("logo1");
            const logo2 = document.getElementById("logo2");
            logo1.style.transform = "scale(0.8)";
            logo2.style.transform = "rotateX(-90deg)";

            setTimeout(() => {
                logo1.style.transform = "scale(1)";
                logo2.style.transform = "rotateX(0deg)";
            }, 100);

            setTimeout(() => {
                const splashScreen = document.querySelector(".splash-screen");
                const instructionScreen = document.querySelector(".instruction-screen");
                splashScreen.classList.remove("visible");
                splashScreen.classList.add("hidden");
                instructionScreen.classList.remove("hidden");
                instructionScreen.classList.add("visible");
            }, 6000);
        }
    </script>
</body>
</html>
