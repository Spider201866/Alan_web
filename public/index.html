<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Alan Onboarding</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles_index.css">

  <!-- 1) Import translations from language.js (ES modules) -->
  <script type="module">
    import { translations } from './language.js';
    // Make translations available globally.
    window.translations = translations;
  </script>

  <!-- 2) Then load your main script (also as a module) -->
  <script type="module" src="index.js"></script>
</head>
<body>
  <!-- PASSWORD SCREEN -->
  <div class="password-screen visible" id="passwordScreen" style="position: relative;">
    <!-- Language selector button & dropdown (22 languages) -->
    <div style="text-align: center; margin-bottom: 60px;">
      <button
        id="index-language-button"
        title="Choose language"
        style="
          background: url('lang.jpg') no-repeat center center;
          background-size: cover;
          width: 64px;
          height: 64px;
          border: 3px solid #3e3e3e;
          cursor: pointer;
        "
      ></button>
      <div
        id="index-language-dropdown"
        style="
        display: none;
        position: absolute;
        top: 40px;
        left: 50%;
        transform: translateX(-50%);
        background: #fff;
        border: 1px solid #ccc;
        z-index: 9999;
        min-width: 220px;
        white-space: nowrap;
    
        /* Add these lines */
        max-height: 350px;
        overflow-y: auto;
        font-size: 0.9em; 
        line-height: 1.2;
        "
      >
        <ul style="margin: 0; padding: 0; list-style: none;">
          <li data-value="en" style="padding: 6px; cursor: pointer;"><strong>English</strong> (English)</li>
          <li data-value="zh" style="padding: 6px; cursor: pointer;"><strong>中文</strong> (Chinese)</li>
          <li data-value="hi" style="padding: 6px; cursor: pointer;"><strong>हिन्दी</strong> (Hindi)</li>
          <li data-value="es" style="padding: 6px; cursor: pointer;"><strong>Español</strong> (Spanish)</li>
          <li data-value="ar" style="padding: 6px; cursor: pointer;"><strong>العربية</strong> (Arabic)</li>
          <li data-value="fr" style="padding: 6px; cursor: pointer;"><strong>Français</strong> (French)</li>
          <li data-value="bn" style="padding: 6px; cursor: pointer;"><strong>বাংলা</strong> (Bangla)</li>
          <li data-value="pt" style="padding: 6px; cursor: pointer;"><strong>Português</strong> (Portuguese)</li>
          <li data-value="id" style="padding: 6px; cursor: pointer;"><strong>Bahasa Indonesia</strong> (Indonesian)</li>
          <li data-value="sw" style="padding: 6px; cursor: pointer;"><strong>Kiswahili</strong> (Swahili)</li>
          <li data-value="ur" style="padding: 6px; cursor: pointer;"><strong>اردو</strong> (Urdu)</li>
          <li data-value="fa" style="padding: 6px; cursor: pointer;"><strong>فارسی</strong> (Persian)</li>
          <li data-value="ln" style="padding: 6px; cursor: pointer;"><strong>Lingala</strong> (Lingala)</li>
          <li data-value="ha" style="padding: 6px; cursor: pointer;"><strong>Hausa</strong> (Hausa)</li>
          <li data-value="yo" style="padding: 6px; cursor: pointer;"><strong>Yorùbá</strong> (Yoruba)</li>
          <li data-value="ig" style="padding: 6px; cursor: pointer;"><strong>Igbo</strong> (Igbo)</li>
          <li data-value="zu" style="padding: 6px; cursor: pointer;"><strong>Zulu</strong> (Zulu)</li>
          <li data-value="am" style="padding: 6px; cursor: pointer;"><strong>አማርኛ</strong> (Amharic)</li>
          <li data-value="sn" style="padding: 6px; cursor: pointer;"><strong>chiShona</strong> (Shona)</li>
          <li data-value="rw" style="padding: 6px; cursor: pointer;"><strong>Ikinyarwanda</strong> (Kinyarwanda)</li>
          <li data-value="ny" style="padding: 6px; cursor: pointer;"><strong>Chichewa</strong> (Chichewa)</li>
          <li data-value="cy" style="padding: 6px; cursor: pointer;"><strong>Cymraeg</strong> (Welsh)</li>
        </ul>
      </div>
    </div>

    <!-- Heading to translate: "Enter your Alan invitation password" -->
    <h2 id="password-title" style="margin-bottom: 40px; font-weight: normal;">
      Enter your <span style="font-weight: bold; font-family: 'Quicksand', sans-serif;"><span style="color: red;">Al</span>an</span> invitation password
    </h2>

    <!-- Password input and submit button -->
    <div style="display: flex; align-items: center; margin-bottom: 20px;">
      <div style="display: flex; flex-direction: column; margin-right: 30px;">
        <input
          type="password"
          id="passwordInput"
          placeholder="Password"
          style="color: grey; padding: 12px; width: 220px; font-size: 16px; border-radius: 12px; border: 1px solid #ccc; margin-bottom: 20px;"
        />
        <p
          id="passwordError"
          style="color: red; display: none; width: 220px; text-align: center; margin-top: 6px; margin-bottom: 0;"
        >
          Invalid password. Please try again
        </p>
      </div>
      <button
        id="passwordSubmitBtn"
        disabled
        style="padding: 12px; font-size: 16px; border-radius: 12px; border: 1px solid #ccc; cursor: pointer; margin-top: -15px;"
      >
        Submit
      </button>
    </div>

    <!-- Small italic note -->
    <p id="noCodeLine" style="margin-top: 50px; font-style: italic; font-size: 14px; color: black; text-align: center;">
      No or incorrect code? Contact us <a href="https://medicine.st-andrews.ac.uk/arclight/contact/" style="color: blue;" target="_blank">here</a>
    </p>
  </div>
  <!-- END PASSWORD SCREEN -->

  <!-- SPLASH SCREEN -->
  <div class="splash-screen hidden">
    <img id="logo1" src="./Q.png" alt="Q Logo" />
    <img id="logo2" src="./AP.png" alt="AP Logo" />
    <p>Eye, Ear, Skin AI Assistant</p>
  </div>

  <!-- INSTRUCTION (ONBOARDING) SCREEN -->
  <div class="instruction-screen hidden">
    <img src="bigredt.png" alt="Big Red T Logo" style="max-width: 120px; height: auto; margin-bottom: -10px" />
    <!-- Onboarding description (translatable) -->
    <p id="instruction-text" style="text-align: justify;">
      Alan is an AI assistant for students and those who only occasionally see eye, ear or skin cases. Write or speak clearly and avoid identifying names or details.
    </p>
    <!-- Good luck note -->
    <p id="good-luck" class="good-luck" style="text-align: center;">Good luck!</p>

    <!-- NAME INPUT -->
    <input
      type="text"
      id="nameInput"
      class="name-input"
      placeholder="Name"
      title="2-20 letters, spaces, apostrophes or hyphens only"
      style="color: grey;"
    />

    <!-- JOB ROLE -->
    <select id="job-role-select" class="job-role-dropdown">
      <option value="" disabled selected hidden>Role</option>
      <option value="Health worker">Health worker</option>
      <option value="Nurse">Nurse</option>
      <option value="Ophthalmic clinical officer">Ophthalmic clinical officer</option>
      <option value="Medical student">Medical student</option>
      <option value="Physician associate">Physician associate</option>
      <option value="General practitioner">General practitioner</option>
      <option value="Hospital doctor">Hospital doctor</option>
      <option value="Ophthalmologist">Ophthalmologist</option>
      <option value="Optometrist">Optometrist</option>
      <option value="Orthoptist">Orthoptist</option>
      <option value="ENT specialist">ENT specialist</option>
      <option value="Pharmacist">Pharmacist</option>
      <option value="Audiologist">Audiologist</option>
      <option value="Ear care practitioner">Ear care practitioner</option>
      <option value="Dermatologist">Dermatologist</option>
    </select>

    <!-- EXPERIENCE -->
    <select id="experience-select" class="experience-dropdown">
      <option value="" disabled selected hidden>Experience</option>
      <option value="<1 yr">&lt;1 yr</option>
      <option value="1-3 yr">1-3 yr</option>
      <option value="3-7 yr">3-7 yr</option>
      <option value=">7 yr">&gt;7 yr</option>
    </select>

    <!-- AIMS BUTTON & DROPDOWN -->
    <div class="focus-container">
      <button id="focusToggleBtn" class="focus-button">Aims</button>
      <div id="focusDropdown" class="focus-dropdown hidden">
        <label>
          <input type="checkbox" name="focus" value="Second opinion" />
          <span class="aims-label-text">Second opinion</span>
        </label>
        <label>
          <input type="checkbox" name="focus" value="Condition lookup" />
          <span class="aims-label-text">Condition lookup</span>
        </label>
        <label>
          <input type="checkbox" name="focus" value="Communicate better" />
          <span class="aims-label-text">Communicate better</span>
        </label>
      </div>
    </div>

    <!-- CONTACT INFO -->
    <input
    type="text"
    id="contactInput"
    class="contact-input"
    placeholder="Contact (email/phone)"
    autocomplete="off"
    autocorrect="off"
    autocapitalize="off"
    spellcheck="false"
  />
  
  

    <br><br><br>
    <button id="acceptButton" disabled>Accept</button>
    <br>
    <div id="locationInfo" style="display:none;"></div>
  </div>

  <!-- BLACK SCREEN OVERLAY -->
  <div class="black-screen" id="blackScreen">
    <img src="./sky.png" alt="Sky">
  </div>

  <!-- SINGLE SCRIPT BLOCK -->
  <script>
    /*********************************************/
    /*               GLOBAL REFERENCES           */
    /*********************************************/
    const passwordScreen     = document.getElementById("passwordScreen");
    const passwordInput      = document.getElementById("passwordInput");
    const passwordSubmitBtn  = document.getElementById("passwordSubmitBtn");
    const passwordError      = document.getElementById("passwordError");

    const splashScreenRef    = document.querySelector(".splash-screen");
    const instructionRef     = document.querySelector(".instruction-screen");
    const blackScreen        = document.getElementById("blackScreen");
    const skyImage           = blackScreen.querySelector("img");

    const nameInput          = document.getElementById("nameInput");
    const jobSelectElement   = document.getElementById("job-role-select");
    const experienceSelect   = document.getElementById("experience-select");
    const contactInput       = document.getElementById("contactInput");
    const acceptButton       = document.getElementById("acceptButton");

    const focusToggleBtn     = document.getElementById("focusToggleBtn");
    const focusDropdown      = document.getElementById("focusDropdown");
    const focusCheckboxes    = document.querySelectorAll('#focusDropdown input[name="focus"]');

    let ipLatitude  = "Not set";
    let ipLongitude = "Not set";
    let ipCountry   = "Not set";
    let ipArea      = "Not set";
    let ipISO2      = "Not set";

    // Classification Arrays (2-letter ISO)
    const classificationLookup = {
      "HI": [ "QA","MO","LU","SG","BN","IE","NO","KW","AE","CH","HK","SM","US","SA","NL","IS","BH","SE",
              "DE","AU","TW","DK","AT","CA","BE","OM","FI","GB","FR","JP","MT","KR","NZ","ES","IT","PR","CY","IL","CZ" ],
      "MI": [ "GQ","SI","SK","LT","EE","TT","PT","PL","HU","MY","SC","RU","GR","LV","KN","AG","TR","KZ","BS","CL","PA",
              "HR","RO","UY","MU","BG","AR","IR","MX","LB","GA","MV","TM","BY","BW","TH","CN","BR","ZA","IN" ],
      "LI": [ "BB","ME","AZ","CR","IQ","DO","PW","MK","RS","DZ","GD","CO","SR","LC","PE","LK","EG","MN","JO","AL","VE",
              "ID","DM","XK","NR","TN","VC","NA","BA","EC","GE","SZ","FJ","LY","PY","JM","AM","SV","BT","UA","MA","BZ",
              "GY","PH","GT","BO","LA","UZ","CV","VN","PK" ],
      "VLI": ["AO","CG","MM","NG","NI","WS","MD","TO","HN","TL","GH","SD","BD","MR","KH","ZM","LS","CI","TV","PG","KG",
              "DJ","KE","MH","FM","CM","TZ","ST","TJ","VU","NP","SN","TD","UG","YE","ZW","BJ","ML","SB","ET","RW","GN",
              "KI","AF","BF","HT","GW","SL","GM","SS","TG","KM","MG","ER","MZ","MW","NE","LR","BI","CD","CF"]
    };

    /*********************************************/
    /*             HELPER FUNCTIONS              */
    /*********************************************/
    // 1) Check if password is already verified
    function checkPasswordStatus() {
      const isVerified = localStorage.getItem("verified");
      if (isVerified === "true") {
        // Skip password screen
        passwordScreen.classList.remove("visible");
        passwordScreen.classList.add("hidden");
        showSplashOrRedirect();
      } else {
        // Show password screen
        passwordScreen.classList.add("visible");
        passwordScreen.classList.remove("hidden");
      }
    }

    // 2) If splash not shown before, show. Otherwise skip to home
    function showSplashOrRedirect() {
      if (!sessionStorage.getItem("splashShown")) {
        sessionStorage.setItem("splashShown", "true");
        showSplashScreen();
      } else {
        // If user revisits index after verification, skip straight to home
        window.location.href = "home.html";
      }
    }

    // 3) Splash screen animation
    function showSplashScreen() {
      const logo1 = document.getElementById("logo1");
      const logo2 = document.getElementById("logo2");

      logo1.style.transform = "scale(0.8)";
      logo2.style.transform = "rotateX(-90deg)";

      setTimeout(() => {
        logo1.style.transform = "scale(1)";
        logo2.style.transform = "rotateX(0deg)";
      }, 100);

      // After 1 second, hide splash & show instructions
      setTimeout(() => {
        splashScreenRef.classList.remove("visible");
        splashScreenRef.classList.add("hidden");
        instructionRef.classList.remove("hidden");
        instructionRef.classList.add("visible");
      }, 1000);
    }

    // 4) Fetch IP-based location
    function fetchIPBasedLocation() {
      fetch("https://ipapi.co/json/")
        .then(response => response.json())
        .then(data => {
          if (data) {
            ipLatitude  = data.latitude       || "Not set";
            ipLongitude = data.longitude      || "Not set";
            ipCountry   = data.country_name   || "Not set";
            ipArea      = data.city           || "Not set";
            ipISO2      = (data.country       || "Not set").toUpperCase();

            // Save to localStorage
            localStorage.setItem("latitude",  ipLatitude);
            localStorage.setItem("longitude", ipLongitude);
            localStorage.setItem("country",   ipCountry);
            localStorage.setItem("area",      ipArea);
            localStorage.setItem("iso2",      ipISO2);

            // Classify the 2-letter code
            storeClassifications(ipISO2);
          }
        })
        .catch(error => {
          console.error("Error fetching IP-based location:", error);
        });
    }

    // 5) Classify user country
    function storeClassifications(iso2) {
      let classification = "Unknown";
      for (const [key, values] of Object.entries(classificationLookup)) {
        if (values.includes(iso2)) {
          classification = key;
          break;
        }
      }
      localStorage.setItem("classification", classification);
    }

    // 6) Form readiness
    function checkSelections() {
      jobSelectElement.style.color = jobSelectElement.value ? "blue" : "grey";
      experienceSelect.style.color = experienceSelect.value ? "blue" : "grey";

      if (nameInput.value.trim().length >= 2) {
        nameInput.style.color = "blue";
      } else {
        nameInput.style.color = "grey";
      }

      const isAnyFocusSelected = Array.from(focusCheckboxes).some(cb => cb.checked);
      focusToggleBtn.classList.toggle("entered", isAnyFocusSelected);

      acceptButton.disabled = !(
        nameInput.value.trim() &&
        jobSelectElement.value &&
        experienceSelect.value &&
        isAnyFocusSelected &&
        contactInput.value.trim()
      );
    }

    // 7) Event listeners
    function initEventListeners() {
      // Animate sky
      skyImage.style.transform = "scale(1)";
      skyImage.style.transition = "transform 4s ease-in-out, filter 4s ease-in-out";

      nameInput.addEventListener("input", (e) => {
        e.target.value = e.target.value.replace(/[^A-Za-z'\- ]/g, "");
        if (e.target.value.length > 20) {
          e.target.value = e.target.value.substring(0, 20);
        }
        checkSelections();
      });

      jobSelectElement.addEventListener("change", checkSelections);
      experienceSelect.addEventListener("change", checkSelections);
      contactInput.addEventListener("input", () => {
        contactInput.classList.toggle("entered", contactInput.value.trim() !== "");
        checkSelections();
      });

      focusToggleBtn.addEventListener("click", () => {
        focusDropdown.classList.toggle("hidden");
        focusDropdown.classList.toggle("visible");
      });
      document.addEventListener("click", (event) => {
        if (!focusDropdown.contains(event.target) && event.target !== focusToggleBtn) {
          focusDropdown.classList.add("hidden");
          focusDropdown.classList.remove("visible");
        }
      });
      focusCheckboxes.forEach((checkbox) => {
        checkbox.addEventListener("change", checkSelections);
      });

      acceptButton.addEventListener("click", handleAccept);

      // PASSWORD: input & submit
      passwordInput.addEventListener("input", () => {
        passwordSubmitBtn.disabled = (passwordInput.value.trim() === "");
        passwordError.style.display = "none";
      });
      passwordSubmitBtn.addEventListener("click", verifyPassword);
    }

    // 8) Verify password (client-side check)
    function verifyPassword() {
      const entered = passwordInput.value.trim();

      fetch("/fetch-records", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ password: entered })
      })
      .then(response => {
        if (!response.ok) {
          throw new Error("Invalid password");
        }
        localStorage.setItem("verified", "true");
        passwordScreen.classList.remove("visible");
        passwordScreen.classList.add("hidden");
        showSplashOrRedirect();
      })
      .catch(err => {
        passwordError.style.display = "block";
        passwordInput.value = "";
        passwordSubmitBtn.disabled = true;
        setTimeout(() => {
          passwordError.style.display = "none";
        }, 3000);
      });
    }

    // 9) When user clicks "Accept" at end of onboarding
// 9) When user clicks "Accept" at end of onboarding
function handleAccept() {
  const rawName = nameInput.value.trim();
  const nameIsValid = /^[A-Za-z'\- ]{2,20}$/.test(rawName);
  if (!nameIsValid) {
    alert("Please enter a valid name (2-20 letters, spaces, apostrophes, or hyphens).");
    return;
  }

  localStorage.setItem("name", rawName);
  localStorage.setItem("selectedJobRole", jobSelectElement.value);
  localStorage.setItem("selectedExperience", experienceSelect.value);

  // --- NEW SNIPPET TO SET roleClassification ---
  let roleClass;
  const jobRole = jobSelectElement.value;
  switch (jobRole) {
    case "Health worker":
    case "Nurse":
    case "Medical student":
    case "Hospital doctor":
    case "General practitioner":
    case "Physician associate":
    case "Ophthalmologist":
    case "ENT specialist":
    case "Dermatologist":
      roleClass = " (M)";
      break;
    default:
      roleClass = " (P)";
      break;
  }
  localStorage.setItem("roleClassification", roleClass);
  // --- END NEW SNIPPET ---

  const selectedFocusValues = Array.from(focusCheckboxes)
    .filter(cb => cb.checked)
    .map(cb => cb.value);
  localStorage.setItem("selectedFocus", JSON.stringify(selectedFocusValues));

  localStorage.setItem("contactInfo", contactInput.value);

  if (!localStorage.getItem("sessionId")) {
    localStorage.setItem("sessionId", `user-${Date.now()}`);
  }

  const userInfo = {
    sessionId: localStorage.getItem("sessionId"),
    name: rawName,
    role: jobSelectElement.value,
    experience: experienceSelect.value,
    focus: selectedFocusValues,
    latitude: localStorage.getItem("latitude"),
    longitude: localStorage.getItem("longitude"),
    country: localStorage.getItem("country"),
    iso2: localStorage.getItem("iso2"),
    classification: localStorage.getItem("classification"),
    area: localStorage.getItem("area"),
    contactInfo: contactInput.value,
    dateTime: new Date().toLocaleString("en-GB", { timeZone: "UTC" })
  };

  fetch("https://alan.up.railway.app/record-info", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(userInfo)
  })
  .then(resp => resp.text())
  .then(data => {
    console.log("Record saved:", data);
  })
  .catch(err => {
    console.error("Error saving record:", err);
  });

  blackScreen.style.visibility = "visible";
  blackScreen.style.opacity = 1;
  setTimeout(() => {
    skyImage.style.transform = "scale(1.3)";
    skyImage.style.filter = "blur(0px)";
  }, 200);

  setTimeout(() => {
    blackScreen.style.opacity = 0;
    setTimeout(() => {
      window.location.href = "home.html";
    }, 250);
  }, 6000);
}


    // 10) Main initialisation
    function main() {
      checkPasswordStatus();
      fetchIPBasedLocation();
      initEventListeners();

      const indexLangButton   = document.getElementById('index-language-button');
      const indexLangDropdown = document.getElementById('index-language-dropdown');

      indexLangButton.addEventListener('click', () => {
        if (indexLangDropdown.style.display === 'none' || indexLangDropdown.style.display === '') {
          indexLangDropdown.style.display = 'block';
        } else {
          indexLangDropdown.style.display = 'none';
        }
      });

      indexLangDropdown.querySelectorAll('li').forEach((item) => {
        item.addEventListener('click', () => {
          const chosenLang = item.getAttribute('data-value');
          localStorage.setItem('preferredLanguage', chosenLang);
          updateIndexLanguageDisplays(chosenLang);
          console.log("User chose language:", chosenLang);
          indexLangDropdown.style.display = 'none';
        });
      });
    }

    document.addEventListener("DOMContentLoaded", main);

    // Update translatable onboarding texts.
    function updateIndexLanguageDisplays(lang) {
  // Update password screen texts:
  document.getElementById("password-title").textContent =
    translations[lang].passwordTitle;
  document.getElementById("passwordInput").placeholder =
    translations[lang].passwordPlaceholder;
  document.getElementById("passwordError").textContent =
    translations[lang].passwordErrorMsg;
  document.getElementById("passwordSubmitBtn").textContent =
    translations[lang].passwordSubmitBtn;
  document.getElementById("noCodeLine").innerHTML =
    translations[lang].noCodeLine;

  // Update onboarding/instruction screen texts:
  document.getElementById("instruction-text").textContent =
    translations[lang].instructionText;
  document.getElementById("good-luck").textContent =
    translations[lang].goodLuck;
  document.getElementById("nameInput").placeholder =
    translations[lang].namePlaceholder;

  // Update Role dropdown's first (disabled) option:
  document.querySelector("#job-role-select option[disabled]").textContent =
    translations[lang].rolePlaceholder;
  
  // **New Block: Update Job Role options**
  const roleOptions = document.querySelectorAll("#job-role-select option:not([disabled])");
  roleOptions.forEach(option => {
      // Mapping from the option value to the corresponding translation key in language.js
      const mapping = {
         "Health worker": translations[lang].healthWorker,
         "Nurse": translations[lang].nurse,
         "Ophthalmic clinical officer": translations[lang].ophthalmicOfficer,
         "Medical student": translations[lang].medicalStudent,
         "Physician associate": translations[lang].physicianAssociate,
         "General practitioner": translations[lang].generalPractitioner,
         "Hospital doctor": translations[lang].hospitalDoctor,
         "Ophthalmologist": translations[lang].ophthalmologist,
         "Optometrist": translations[lang].optometrist,
         "Orthoptist": translations[lang].orthoptist,
         "ENT specialist": translations[lang].entSpecialist,
         "Pharmacist": translations[lang].pharmacist,
         "Audiologist": translations[lang].audiologist,
         "Ear care practitioner": translations[lang].earCarePractitioner,
         "Dermatologist": translations[lang].dermatologist
      };
      if (mapping[option.value]) {
         option.textContent = mapping[option.value];
      }
  });

  // Update Experience dropdown's first (disabled) option:
  document.querySelector("#experience-select option[disabled]").textContent =
    translations[lang].experiencePlaceholder;
  
  // Update the Experience options (skip the first disabled option):
  const expOptions = document.querySelectorAll("#experience-select option");
  if (expOptions.length >= 5) {
    expOptions[1].textContent = translations[lang].experienceOption1;
    expOptions[2].textContent = translations[lang].experienceOption2;
    expOptions[3].textContent = translations[lang].experienceOption3;
    expOptions[4].textContent = translations[lang].experienceOption4;
  }
  
  // Update Aims button text:
  document.getElementById("focusToggleBtn").textContent =
    translations[lang].aimsButton;
  
  // Update Aims dropdown checkbox labels (using spans):
  const aimsLabelSpans = document.querySelectorAll("#focusDropdown .aims-label-text");
  if (aimsLabelSpans.length >= 3) {
    aimsLabelSpans[0].textContent = translations[lang].aimsOption1;
    aimsLabelSpans[1].textContent = translations[lang].aimsOption2;
    aimsLabelSpans[2].textContent = translations[lang].aimsOption3;
  }
  
  // Update Contact input placeholder:
  const contactInputEl = document.getElementById("contactInput");
contactInputEl.value = ""; // clear any existing (or autofilled) value
contactInputEl.placeholder = translations[lang].contactPlaceholder;


  
  // Update Accept button text:
  document.getElementById("acceptButton").textContent =
    translations[lang].acceptButton;
}

  </script>
</body>
</html>
