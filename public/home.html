<!-- Alan UI - home.html | 19th June 2025, WJW -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Alan: AI assistant for eyes, ears, and skin. Chat, learn, and get guidance on clinical cases with Arclight integration."
    />
    <title>Alan</title>

    <!-- External Dependencies -->
    <script
      src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"
      defer
    ></script>
    <link rel="stylesheet" href="styles/styles.css" />
    <link rel="prefetch" href="images/atomsblue.jpg" as="image" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <!-- External JS Modules -->
    <script type="module" src="scripts/faviconAndMeta.js" defer></script>
    <script type="module" src="scripts/closer.js" defer></script>
    <script type="module" src="scripts/language.js" defer></script>
    <script src="scripts/muted.js" defer></script>

    <!-- Inline styles are being removed or refactored into styles.css -->
  </head>
  <body>
    <a href="#main-content" class="skip-to-content">Skip to main content</a>
    <div class="page-container">
      <!-- HEADER -->
      <header class="chatbot-header">
        <div class="flex-spacer"></div>
        <div>
          <div class="chatbot-title"><span class="red">Al</span><span class="white">an</span></div>
          <div class="chatbot-subtitle">Eyes, Ears, Skin</div>
        </div>
        <div class="flex-spacer"></div>
      </header>

      <!-- SIDE MENU -->
      <div class="menu-icon"></div>
      <nav class="side-menu">
        <div class="side-menu-top-row">
          <button id="instructions-button" class="button red pulse"></button>
        </div>
        <div class="menu-row">
          <button
            id="eye-button"
            class="button btn-colored btn-eye"
            aria-label="Navigate to Eye section"
          >
            Eye
          </button>
          <button
            id="ear-button"
            class="button btn-colored btn-ear"
            aria-label="Navigate to Ear section"
          >
            Ear
          </button>
          <button
            id="skin-button"
            class="button btn-colored btn-skin"
            aria-label="Navigate to Skin section"
          >
            Skin
          </button>
        </div>
        <div class="menu-row">
          <a href="https://www.youtube.com/@arclightproject" class="menu-link">
            <button id="videos-button" class="button grey" aria-label="View Videos">Videos</button>
          </a>
          <button id="atoms-button" class="button grey" aria-label="Navigate to Atoms section">
            Atoms
          </button>
          <button id="tools-button" class="button grey" aria-label="View Tools">Tools</button>
          <div class="language-container">
            <button
              class="button btn-lang"
              id="language-button"
              aria-label="Change language"
            ></button>
            <div id="language-dropdown">
              <ul>
                <li data-value="en"><strong>English</strong> (English)</li>
                <li data-value="zh"><strong>中文</strong> (Chinese)</li>
                <li data-value="hi"><strong>हिन्दी</strong> (Hindi)</li>
                <li data-value="es"><strong>Español</strong> (Spanish)</li>
                <li data-value="ar"><strong>العربية</strong> (Arabic)</li>
                <li data-value="fr"><strong>Français</strong> (French)</li>
                <li data-value="bn"><strong>বাংলা</strong> (Bangla)</li>
                <li data-value="pt"><strong>Português</strong> (Portuguese)</li>
                <li data-value="id"><strong>Bahasa Indonesia</strong> (Indonesian)</li>
                <li data-value="sw"><strong>Kiswahili</strong> (Swahili)</li>
                <li data-value="ur"><strong>اردو</strong> (Urdu)</li>
                <li data-value="fa"><strong>فارسی</strong> (Persian)</li>
                <li data-value="ln"><strong>Lingala</strong> (Lingala)</li>
                <li data-value="ha"><strong>Hausa</strong> (Hausa)</li>
                <li data-value="yo"><strong>Yorùbá</strong> (Yoruba)</li>
                <li data-value="ig"><strong>Igbo</strong> (Igbo)</li>
                <li data-value="zu"><strong>Zulu</strong> (Zulu)</li>
                <li data-value="am"><strong>አማርኛ</strong> (Amharic)</li>
                <li data-value="sn"><strong>chiShona</strong> (Shona)</li>
                <li data-value="rw"><strong>Ikinyarwanda</strong> (Kinyarwanda)</li>
                <li data-value="ny"><strong>Chichewa</strong> (Chichewa)</li>
                <li data-value="cy"><strong>Cymraeg</strong> (Welsh)</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="side-menu-top-row">
          <a href="https://arclightprojectshop.co.uk/" style="text-decoration: none">
            <button id="arclight-project-button" class="button grey">Arclight Project</button>
          </a>
          <button id="links-button" class="button grey">Links</button>
          <button id="about-button" class="button grey">About</button>
        </div>

        <!-- Sidebar chat history (collapsible sessions) -->
        <div id="chatHistorySidebar" class="sidebar-history"></div>
        <!-- clear-history button -->
        <button
          id="clearHistoryBtn"
          title="Delete all chat history"
          aria-label="Delete all chat history"
        >
          <!-- small rubbish-bin icon (24×24, stroke-only) -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="22"
            stroke="#666"
            fill="none"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            viewBox="0 0 24 24"
          >
            <polyline points="3 6 5 6 21 6" />
            <path
              d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4
             a2 2 0 0 1 2 2v2"
            />
            <line x1="10" y1="11" x2="10" y2="17" />
            <line x1="14" y1="11" x2="14" y2="17" />
          </svg>
        </button>
      </nav>

      <!-- MAIN CONTENT -->
      <main id="main-content" class="content-wrapper">
        <div class="logo-and-text-container">
          <p id="additional-text" class="grey-text">
            <span id="good-history">Good History</span> |
            <span id="examine-well">Examine Well</span> |
            <span id="use-arclight">Use Arclight</span>
          </p>
          <p id="sub-text" class="centered-content"></p>
        </div>
        <div class="animation-container" id="animationContainer">
          <img src="images/eyeor.gif" alt="Eyeor Animation" class="fade-in-out" loading="lazy" />
        </div>
      </main>

      <!-- START: New marquee section -->
      <section id="boxes-marquee-section">
        <div class="marquee">
          <div class="marquee-content-reverse">
            <!-- EYE lines, FIRST copy -->
            <div class="box" id="eyeMarqueeLine1a">What is glaucoma?</div>
            <div class="box" id="eyeMarqueeLine2a">
              How do I see the optic disc with the Arclight?
            </div>
            <div class="box" id="eyeMarqueeLine3a">
              Man 25, red eye, 3 day, photophobia, VA down a little
            </div>
            <div class="box" id="eyeMarqueeLine4a">Tell me about Iritis</div>
            <div class="box" id="eyeMarqueeLine5a">Do I refer congenital cataract urgently?</div>
            <div class="box" id="eyeMarqueeLine6a">
              Woman 65, vision poor, no glasses. Front eye OK, cloudy pupil
            </div>
            <div class="box" id="eyeMarqueeLine7a">
              Mother worried about baby as noticed white pupil, no vision in eye.
            </div>
            <!-- EYE lines, SECOND copy (for seamless loop) -->
            <div class="box" id="eyeMarqueeLine1b" aria-hidden="true">What is glaucoma?</div>
            <div class="box" id="eyeMarqueeLine2b" aria-hidden="true">
              How do I see the optic disc with the Arclight?
            </div>
            <div class="box" id="eyeMarqueeLine3b" aria-hidden="true">
              Man 25, red eye, 3 day, photophobia, VA down a little
            </div>
            <div class="box" id="eyeMarqueeLine4b" aria-hidden="true">Tell me about Iritis</div>
            <div class="box" id="eyeMarqueeLine5b" aria-hidden="true">
              Do I refer congenital cataract urgently?
            </div>
            <div class="box" id="eyeMarqueeLine6b" aria-hidden="true">
              Woman 65, vision poor, no glasses. Front eye OK, cloudy pupil
            </div>
            <div class="box" id="eyeMarqueeLine7b" aria-hidden="true">
              Mother worried about baby as noticed white pupil, no vision in eye.
            </div>
          </div>
        </div>
        <div class="marquee">
          <div class="marquee-content">
            <!-- EAR lines, FIRST copy -->
            <div class="box" id="earMarqueeLine1a">What is otitis media?</div>
            <div class="box" id="earMarqueeLine2a">
              Can I see the tympanic membrane with my Arclight?
            </div>
            <div class="box" id="earMarqueeLine3a">
              Lad 16, sore pinna, 2 day, itchy, hearing is good
            </div>
            <div class="box" id="earMarqueeLine4a">Tell me about syringing</div>
            <div class="box" id="earMarqueeLine5a">Do I refer mastoditis urgently?</div>
            <div class="box" id="earMarqueeLine6a">
              Man 73yr, hearing poor. Poor view of canal. I just see wax
            </div>
            <div class="box" id="earMarqueeLine7a">Infant no response to voice. Been months</div>
            <!-- EAR lines, SECOND copy (for seamless loop) -->
            <div class="box" id="earMarqueeLine1b" aria-hidden="true">What is otitis media?</div>
            <div class="box" id="earMarqueeLine2b" aria-hidden="true">
              Can I see the tympanic membrane with my Arclight?
            </div>
            <div class="box" id="earMarqueeLine3b" aria-hidden="true">
              Lad 16, sore pinna, 2 day, itchy, hearing is good
            </div>
            <div class="box" id="earMarqueeLine4b" aria-hidden="true">Tell me about syringing</div>
            <div class="box" id="earMarqueeLine5b" aria-hidden="true">
              Do I refer mastoditis urgently?
            </div>
            <div class="box" id="earMarqueeLine6b" aria-hidden="true">
              Man 73yr, hearing poor. Poor view of canal. I just see wax
            </div>
            <div class="box" id="earMarqueeLine7b" aria-hidden="true">
              Infant no response to voice. Been months
            </div>
          </div>
        </div>
      </section>
      <!-- END: New marquee section -->

      <div class="main-wrapper">
        <div class="chatbot-container">
          <flowise-fullchatbot></flowise-fullchatbot>
        </div>
        <div id="muted-buttons"></div>
        <div class="detected-condition"></div>
        <p id="condition-description"></p>
      </div>

      <footer class="chatbot-version">Alan can make mistakes, double check everything</footer>
    </div>

    <!-- MODAL OVERLAY FOR POPUP ACCESSIBILITY -->
    <div id="modal-overlay" style="display: none"></div>
    <!-- POPUP -->
    <aside id="popup">
      <span class="popup-close">×</span>
      <div class="popup-content" id="popup-content"></div>
      <div class="popup-button-container">
        <button id="geolocation-button" class="button grey">Check Location</button>
        <button id="geo-info-button" aria-label="Show location info">i</button>
        <p id="location-info"></p>
        <div id="geo-info-popup">
          <p id="geoInfoText">Additional info...</p>
        </div>
      </div>
    </aside>

    <!-- SCRIPT BLOCK -->
    <script type="module" src="scripts/home.js" defer></script>
    <script type="module">
      document.addEventListener('DOMContentLoaded', () => {
        const eyeButton = document.getElementById('eye-button');
        if (eyeButton) {
          eyeButton.addEventListener('click', () => {
            window.location.href = 'eye.html';
          });
        }

        const earButton = document.getElementById('ear-button');
        if (earButton) {
          earButton.addEventListener('click', () => {
            window.location.href = 'ear.html';
          });
        }

        const skinButton = document.getElementById('skin-button');
        if (skinButton) {
          skinButton.addEventListener('click', () => {
            window.location.href = 'skin.html';
          });
        }

        const atomsButton = document.getElementById('atoms-button');
        if (atomsButton) {
          atomsButton.addEventListener('click', () => {
            window.location.href = 'atoms.html';
          });
        }

        const linksButton = document.getElementById('links-button');
        if (linksButton) {
          linksButton.addEventListener('click', () => {
            window.location.href = 'weblinks.html';
          });
        }

        const aboutButton = document.getElementById('about-button');
        if (aboutButton) {
          aboutButton.addEventListener('click', () => {
            window.location.href = 'aboutalan.html';
          });
        }

        // Assuming instructions-button might also need this if not handled elsewhere
        const instructionsButton = document.getElementById('instructions-button');
        if (instructionsButton) {
          instructionsButton.addEventListener('click', () => {
            // Add logic for instructions button if it's simple navigation
            // For example: window.location.href = 'instructions.html';
            // Or if it opens a modal, that logic should be in home.js or similar
          });
        }
      });
    </script>
  </body>
</html>
