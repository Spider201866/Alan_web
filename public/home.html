<!-- WJW 08/04/2024 -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Alan</title>

    <script type="module"> import { faviconAndMetaSetup } from './faviconAndMeta.js'; faviconAndMetaSetup();</script>

    <link rel="stylesheet" href="styles.css">

    <script type="module" src="closer.js"></script>
    
  </head>

  <body>
    <style>
      #mainContent { text-align: center; }
    </style>
    <div id="mainContent" class="hidden">
      <strong>*Experimental*</strong> AI assistant. Write clearly, avoid identifying details, keep audio &lt;30s. Good luck!
    </div>
    

    <div class="chatbot-header">
      <div class="flex-spacer"></div> <!-- Invisible spacer to balance the language selector -->
      <div>
          <div class="chatbot-title">
              <span class="red">Al</span><span class="white">an</span>
          </div>
          <div class="chatbot-subtitle">
              Eyes & Ears
          </div>
      </div>
      <div class="language-selector">
        <select class="language-dropdown">
          <option value="en">English</option>
          <option value="fr">Français</option>
          <option value="es">Español</option>
          <option value="pt">Português</option>
          <option value="ar">العربية</option> <!-- Arabic -->
          <option value="sw">Kiswahili</option> <!-- Swahili -->
          <option value="cy">Cymraeg</option> <!-- Welsh -->
          <option value="ny">Chichewa</option> <!-- For Malawi -->
          <option value="rw">Kinyarwanda</option> <!-- For Rwanda -->
          <option value="lg">Luganda</option> <!-- For Uganda -->
      </select>
      
      </div>
      <div class="flex-spacer"></div> <!-- Second spacer for symmetry; can be hidden if not needed -->
  </div>
  

  <div class="menu-icon">&#9776;</div> <!-- Burger Menu Icon -->
  <div class="side-menu">
      <button class="button red">Instructions</button> <!-- New Instructions button with red background -->
      <button class="button">Front of Eye</button>
      <button class="button">Fundal Reflex</button>
      <button class="button">Back of Eye</button>
      <button class="button green">Ear Drum/Canal</button>
      <button class="button grey">Videos</button>
      <button class="button grey">Atoms</button>
      <button class="button grey">Tools</button>
      <button class="button grey">Arclight Project</button>
      <button class="button grey">Web Links</button>
      <button class="button grey">About</button>
  </div>
  
  

      <div class="content-wrapper" style="display: flex; flex-direction: column; justify-content: flex-start; min-height: 20vh; font-weight: bold;">
        <div class="logo-and-text-container" style="text-align: center; line-height: 1.0; padding-top: 20px;">
          <img src="./triangle.png" alt="Logo" id="logo-image" style="max-width: 100px; display: block; margin: 0 auto; margin-bottom: 5px;"> <!-- Adjust margin-bottom if necessary -->
          <p id="additional-text" class="grey-text" style="font-size: 15px; color: grey; margin-top: -5px;"> <!-- Adjust margin-top to reduce space -->
            <span id="good-history">Good History</span>  |  
            <span id="examine-well">Examine Well</span>  |  
            <span id="use-arclight">Use Arclight</span>
          </p>          
          <p id="sub-text" class="centered-content" style="font-size: 16px; color: black; font-weight: 900; padding-bottom: 5px;">How can I help you today?</p>
        </div>
      </div>      
           
</div>

    </div>
    <div class="chatbot-container">
      <flowise-fullchatbot></flowise-fullchatbot>
    </div>

    <div>     
      <!-- Condition name displayed here -->
      <div class="detected-condition"></div>
      
      <!-- Thumbnail image with onclick functionality for zoom -->
      <img id="condition-image" alt="" style="max-width: 100%; height: 120px; display: block; margin: 0 auto; cursor: pointer;" onclick="toggleZoom(this)" /> 
      <p id="condition-description"></p> <!-- Add this line -->
      <div class="chatbot-version">*Alan can make mistakes. Use clinical judgement. 4/24 <br>
      </div>
  </div>
  
  <script>
      function toggleZoom(image) {
          // Check if the image is already zoomed
          if (image.style.height === '200px') {
              // If not zoomed, enlarge to fit the screen
              image.style.height = 'auto'; // Reset height to auto for natural aspect ratio
              image.style.maxWidth = 'none'; // Allow image to exceed the max-width of 100%
              image.style.cursor = 'zoom-out'; // Change cursor for zoom-out
          } else {
              // If zoomed, revert to thumbnail size
              image.style.height = '200px'; // Thumbnail height
              image.style.maxWidth = '100%'; // Ensure image does not exceed container width
              image.style.cursor = 'zoom-in'; // Change cursor for zoom-in
          }
      }
  </script>
    
    <script type="module">  import { initChatbot } from './chatbot-module.js'; initChatbot();</script>

<script type="module" src="listener-module.js"></script>

<script type="module">
  import { translations } from './language.js';

  document.addEventListener('DOMContentLoaded', function() {
    const dropdown = document.querySelector('.language-dropdown');
    
    dropdown.addEventListener('change', function() {
      const lang = this.value;
      document.querySelector('.chatbot-subtitle').textContent = translations[lang].eyesEars;
      document.getElementById('good-history').textContent = translations[lang].goodHistory;
      document.getElementById('examine-well').textContent = translations[lang].examineWell;
      document.getElementById('use-arclight').textContent = translations[lang].useArclight;
      document.getElementById('sub-text').textContent = translations[lang].howCanIHelp;
      document.querySelector('.chatbot-version').textContent = translations[lang].alanMistakes;
    });
  });

  document.querySelector('.menu-icon').addEventListener('click', function() {
  var tray = document.querySelector('.side-menu');
  // Toggle the side menu visibility
  if (tray.style.left === '-250px' || tray.style.left === '') {
    tray.style.left = '0'; // Slide in
    this.classList.add('active'); // Add the 'active' class to change the icon color to black
  } else {
    tray.style.left = '-250px'; // Slide out
    this.classList.remove('active'); // Remove the 'active' class to revert the icon color back to white
  }
});





</script>


  </body>
</html>